# site.yml
---
- name: Setup HomeLab Kubernetes Node
  hosts: k3s_nodes
  become: true
  vars:
    # K3s 버전 지정
    k3s_version: "v1.29.3+k3s1"
    # NetBird Setup Key (실행 시 -e setup_key=... 로 주입 권장)
    netbird_setup_key: "{{ setup_key | default('') }}"
    
  roles:
    - common
    - netbird
    - cilium_prep
    - k3s